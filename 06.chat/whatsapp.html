<!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><meta http-equiv='X-UA-Compatible' content='IE=edge'><meta name='viewport' content='width=device-width, initial-scale=1.0'><script src='https://kit.fontawesome.com/391827d54c.js' crossorigin='anonymous'></script><link rel='stylesheet' href='styles.css'><title>Whatsapp Clone</title><style>*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:#ccc;}.background-green{position:absolute;top:0;width:100%;height:20%;background-color:#009688;}.main-container{position:relative;width:100%;max-width:100%;height:100vh;background:#fff;display:flex;box-shadow:0px 1px 1px 0 rgba(0,0,0,0.5),0px 2px 5px 0 rgba(0,0,0,0.6);}.main-container .left-container{position:relative;width:30%;height:100%;flex:30%;background:#fff;}.main-container .right-container{position:relative;width:70%;height:100%;flex:70%;background:#e5ddd5;}.main-container .right-container::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:url('https://camo.githubusercontent.com/854a93c27d64274c4f8f5a0b6ec36ee1d053cfcd934eac6c63bed9eaef9764bd/68747470733a2f2f7765622e77686174736170702e636f6d2f696d672f62672d636861742d74696c652d6461726b5f61346265353132653731393562366237333364393131306234303866303735642e706e67');opacity:0.5;}.user-img{position:relative;width:40px;height:40px;overflow:hidden;border-radius:50%;}.dp{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;cursor:pointer;}.nav-icons{display:flex;justify-content:flex-end;padding-left:110px;}.nav-icons li{backgroud-color:pink;list-style:none;display:flex;cursor:pointer;color:#51585c;margin-left:22px;font-size:18px;}.chat-list{position:relative;height:calc(100% - 170px);overflow-y:auto;}.chat-list .chat-box{position:relative;width:100%;display:flex;align-items:center;cursor:pointer;padding:15px;border-bottom:1px solid #eee;}.chat-list .chat-box .img-box{position:relative;width:55px;height:45px;overflow:hidden;border-radius:50%;}.chat-list .chat-box .chat-details{width:100%;margin-left:10px;}.chat-list .chat-box .chat-details .text-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:2px;}.chat-list .chat-box .chat-details .text-head h4{font-size:1.1em;font-weight:600;color:#000;}.chat-list .chat-box .chat-details .text-head .time{font-size:0.8em;color:#aaa;}.chat-list .chat-box .chat-details .text-message{display:flex;justify-content:space-between;align-items:center;}.chat-list .chat-box .chat-details .text-message p{color:#aaa;font-size:0.9em;overlay:hidden;}.chat-list .chat-box .chat-details .text-message b{background:#06e744;color:#fff;min-width:20px;height:20px;border-radius:50%;font-size:0.8em;font-weight:400;display:flex;justify-content:center;align-items:center;}.chat-list .active{background:#ebebeb;}.chat-list .chat-box:hover{background:#f5f5f5;}.chat-list .chat-box .chat-details .text-head .unread{color:#06e744;}.chat-container{position:relative;width:100%;height:calc(100% - 60px);padding:50px;overflow-y:auto;}.message-box{position:relative;display:flex;width:100%;margin:5px 0;}.message-box p{position:relative;right:0;text-align:right;max-width:65%;padding:12px;background:#dcf8c6;border-radius:10px;font-size:0.9em;}.message-box.my-message p::before{content:'';position:absolute;top:0;right:-12px;width:20px;height:20px;background:linear-gradient(135deg,#dcf8c6 0%,#dcf8c6 50%,transparent 50%,transparent);}.message-box p span{display:block;margin-top:5px;font-size:0.8em;opacity:0.5;}.my-message{justify-content:flex-end;}.friend-message p{background:#fff;}.friend-message{justify-content:flex-start;}.chat-container .my-message i{color:yellow;}.message-box.friend-message::before{content:'';position:absolute;top:0;left:-12px;width:20px;height:20px;background:linear-gradient(225deg,#fff 0%,#fff 50%,transparent 50%,transparent);}.chatbox-input{position:relative;width:100%;height:60px;background:#f0f0f0;display:flex;justify-content:space-between;align-items:center;}.chatbox-input i{cursor:pointer;font-size:1.8em;color:#515855;}.chatbox-input i:nth-child(1){margin:15px;}.chatbox-input i:last-child{margin-right:25px;}.chatbox-input input{position:relative;width:90%;margin:0 20px;padding:10px 20px;border-radius:10px;font-size:1em;border:none;outline:none;}</style></head><body><div class='main-container'><div class='right-container'><div class='chat-container'><div id='messages'></div></div><div class='chatbox-input'><input type='text' placeholder='Type a message' id='messageInput'><i class='fa-solid fa-paper-plane'  onclick='sendMessage()'></i></div></div></div><script>const socket=new WebSocket('ws://192.168.20.44:81/');let codigo=null;socket.addEventListener('open',(event)=>{console.log('Conexión establecida ',event);});socket.addEventListener('message',(event)=>{console.log('Mensaje recibido:',event.data);let data=JSON.parse(event.data);if(!data.message){codigo=data.clientCode;}console.log('codigo: ',codigo);console.log('data.clientCode: ',data.clientCode);if(!codigo||!data.message)return;if(codigo===data.clientCode){const messagesDiv=document.getElementById('messages');messagesDiv.innerHTML+=`<div class='message-box my-message'><p>${data.message}<br><span>${new Date().toLocaleTimeString('es-ES',{hour12:false,hour:'2-digit',minute:'2-digit'})}</span></p></div>`;}else{const messagesDiv=document.getElementById('messages');messagesDiv.innerHTML+=`<div class='message-box friend-message'><p>${data.message}<br><span>${new Date().toLocaleTimeString('es-ES',{hour12:false,hour:'2-digit',minute:'2-digit'})}</span></p></div>`;}});socket.addEventListener('close',(event)=>{console.log('Conexión cerrada');});function sendMessage(){const messageInput=document.getElementById('messageInput');const message=messageInput.value;console.log('Enviando el mensaje: ');socket.send(message);messageInput.value='';}</script></body></html>
